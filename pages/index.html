
<style>
body {margin: 0; padding: 0; }
#myDiv { position: absolute; top: 0; bottom: 0; width: 100%;
}
</style>
<head>
	<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
</head>
<body>
	<div id='myDiv'><!-- Plotly chart will be drawn inside this DIV --></div>
    <script> 
        var data = [{{ range $r:= .AwsRegions }}
        {
            type: "scattergeo", 
            lon: [{{ $r.Longitude }}], 
            lat: [{{ $r.Latitude }}],
            marker: {size: 10, color: 'blue'},
            text: "{{$r.Location}} ({{$r.Code}})",
            mode: "markers+text",
            textposition: "top center",
        },
        {{ end }}
        {{ range $c:= .Costs }} 
        {
            type: "scattergeo",
            lon: [  {{ $c.SourceRegion.Longitude }} , {{ $c.DestinationRegion.Longitude }} ],
            lat: [ {{ $c.SourceRegion.Latitude }} , {{ $c.DestinationRegion.Latitude }} ],
            mode: 'lines',
            text: "{{ $c.Name }}",
            line: {
                width: 1,
                color: 'red'
            },
            opacity: {{ $c.UsageQuantity }}
        },
        {{- end }}
        ];

        //open-street-map, white-bg, carto-positron, carto-darkmatter, stamen-terrain, stamen-toner, stamen-watercolor
        var layout = {
            font: {
                family: 'Droid Serif, serif',
                size: 8
            },
            title: 'AWS Data Transfers',
            dragmode: 'zoom',
            showlegend: false,
            //mapbox: {style:"carto-positron",zoom: 2, center: { lat: 32, lon: 0 }},
            geo: {
                coastlinewidth: 0.1,
                countrywidth: 0.2,
                resolution: 80,
                showland: true,
                landcolor: '#EAEAAE',
                countrycolor: '#d3d3d3',
                subunitcolor: '#d3d3d3'
            }   
        };
        
        Plotly.newPlot("myDiv", data, layout, {showLink: false,scrollZoom: true});
    </script>
</body>